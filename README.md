## **Описание проекта:**

[![.github/workflows/yamdb_workflow.yml](https://github.com/Eve982/foodgram_project_react/actions/workflows/foodgram_workflow.yml/badge.svg)](https://github.com/Eve982/foodgram_project_react/actions/workflows/foodgram_workflow.yml)

Проект представляет собой сайт с рецептами, где пользователи могут просматривать, добавлять и комментировать рецепты, а также подписываться на любимых авторов, публиковать рецепты и добавлять рецепты в свой список избранного. Также, для авторизованых пользователей, есть возможность добавлять и удалять рецепты из списка покупок, а также скачивать итоговый список всех необходимых ингридиентов для выбранных рецептов (покупок). При создании рецепта ему можно добавлять теги для удобства поиска и фильтрации.
<!-- - публиковать/удалять рецепты, добавлять теги своим рецептам;
- комментировать свои и чужие рецепты;
- оценивать чужие рецепты;
- подписаться/отписаться от автора рецептов;
- просматривать страницу с рецептами, опубликованными авторами, на которого подписался пользователь;
- добавить/удалить рецепт из списка покупок;
- скачать список покупок, который автоматически формируется на основе рецептов из списка покупок; -->

Ссылка на опубликованый проект:
```
http://158.160.50.184/admin/
```
Ссыка на redoc.yaml:
```
http://158.160.50.184/redoc/
```

## **Как запустить проект:**
Все команды необходимо выполнять в командной строке Вашего ПК. Первую команду следует выполнять в той локальной папке своего ПК, в которую Вы хотите склонировать проект из стороннего репозитория.
Клонировать репозиторий выполнением следующей команды в командной строке:

```
git clone <сссылка на проект>
```
если Вы используете SSH-подключение, то, вместо <сссылка на проект>, укажите:

```
git@github.com:Eve982/foodgram_project_react.git
```
для HTTPS-подключений укажите следующую ссылку:

```
https://github.com/Eve982/foodgram_project_react.git
```

Перейти в клонированый проект командой:

```
cd foodgram_project_react
```
<!-- ## Для запуска приложения в Docker-контейнерах:

Убедитесь, что на Вашем компьютере установлен Docker.
Находясь в папке проекта зайдите в папку infra выполнив следующую команду в терминале
```
cd infra
```
Запустите контейнер
```
docker-compose up
```
Для пересборки контейнеров, в случае, если Вы вносили изменения в проект выполните команду:
```
docker-compose up -d --build
```
Выполните миграции в контейнере web:
```
docker-compose exec web python manage.py migrate
```
Создайте суперпользователя:
```
docker-compose exec web python manage.py createsuperuser
```
Соберите статику:
```
docker-compose exec web python manage.py collectstatic --no-input
```
Проект запущен и доступен по адресу: [http://localhost/admin/](http://localhost/admin/)

### **Загрузка тестовых данных в БД**
Узнать CONTAINER ID запущенных контейнеров можно выполнив команду:
```
docker container ls
```
Получить список всех контейнеров можно выполнив команду:
```
docker container ls -a
```
Список только названий и ID контейнеров:
```
 docker container ls --format="table {{.ID}}\t{{.Names}}"
```
Остановить все запущеные контейнеры:
```
docker container stop $(docker container ls -q)
```
Чтобы загрузить тестовые данные в БД, перейдите в каталог проекта и скопируйте файл базы данных в контейнер приложения (Вам нужен контейнер с приставкой -web в названии):
```
docker cp fixtures.json <CONTAINER ID>:/app
```
СПОСОБ 1:
Выполните команду:
```
docker-compose exec web python manage.py loaddata fixtures.json
```
СПОСОБ 2:
Перейдите в контейнер приложения:
```
docker container exec -it <CONTAINER ID> bash
```
Выполните команду для загрузки данных в БД:
```
python manage.py loaddata
```
Для того чтоб сохранить внесенные изменения в БД:
```
docker-compose exec web python manage.py dumpdata > fixtures.json
```

## Для запуска приложения на виртуальном сервере:
Cоздать и активировать виртуальное окружение на MacOS:

*Здесь и далее на Windows вместо команды 'python3 ...' следует использовать команду 'python ...'*

```
python3 -m venv venv
```
на Windows:
```
python -m venv venv
```
Запустить виртуальное окружение на MacOS:

```
source venv/bin/activate
```
на Windows:
```
venv\Scripts\activate
```
Обновить пакетный менеджер pip во избежание проблем при установке зависимостей приложения:

```
python3 -m pip install --upgrade pip
```
Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```
Выполнить миграции:

```
python3 manage.py migrate
```

Запустить проект:

```
python3 manage.py runserver
```

После запуска виртуального сервера можно протестировать работоспособность проекта.

## **Примеры запросов:**

http://localhost/admin/ админка.

http://localhost/auth/ аутентификация.

http://localhost/users/ пользователи.

http://localhost/titles/ произведения.

http://localhost/categories/ категории произведений.

http://localhost/genres/ категории произведений. Одно произведение может относится к нескольким жанрам.

http://localhost/reviews/ отзывы на произведения.

http://localhost/comments/ комментарии к отзывам.

## **Пользовательские роли**
Аноним — может только читать описания произведений, отзывы и комментарии.

Аутентифицированный пользователь (user) — может читать всё, как и Аноним, а также может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому зарегистрированному пользователю.

Модератор (moderator) — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.

Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.

Суперюзер Django - должен всегда обладать правами администратора, пользователя с правами admin. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

## **Шаблон наполнения env-файла:**

Cекретный ключ для settings.py:
```
SECRET_KEY=secret-key
```
Используемая база данных, в данном случае это postgresql:
```
DB_ENGINE=django.db.backends.postgresql
```
Имя БД:
```
DB_NAME=postgres
```
Логин для подключения к БД:
```
POSTGRES_USER=login
```
Пароль для подключения к БД:
```
POSTGRES_PASSWORD=password
```
Указываем название сервиса (контейнера):
```
DB_HOST=db
```
Указываем порт для подключения к БД:
```
DB_PORT=5432
``` -->
